## 1. Introduction

Ce projet porte sur l’analyse d’un jeu de données de santé contenant des informations détaillées sur des patients pris en charge dans des établissements hospitaliers.  
L’objectif est de décrire le profil des patients, d’identifier les principales conditions médicales et d’analyser les montants facturés selon différents facteurs (type d’admission, maladie, assureur, période), puis de proposer un début de modélisation prédictive.

```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

sns.set(style="whitegrid")

df = pd.read_csv("/content/healthcare_dataset.csv")  # adapter si besoin
print("Shape :", df.shape)
print(df.head())
print(df.info())
```

Interprétation:  
- Ce bloc importe les bibliothèques nécessaires et charge le fichier healthcare_dataset.csv dans un DataFrame df.  
- Les commandes shape, head et info donnent un premier aperçu du nombre de lignes, de colonnes et des types de variables.

***

## 2. Description du jeu de données

Le dataset “healthcare_dataset.csv” comporte environ 1 800–2 000 observations et 16 variables principales.  
Les variables couvrent des dimensions démographiques (Age, Gender), médicales (Medical Condition, Test Results), organisationnelles (Admission Type, Hospital, Doctor, dates) et financières (Insurance Provider, Billing Amount).

```python
# Résumé statistique
display(df.describe(include="all").T)
```

Interprétation:  
- Le tableau fournit un résumé statistique des variables numériques (moyenne, écart-type, min, max) et des variables catégorielles (nombre de catégories, modalité la plus fréquente, fréquence).  
- Cela permet d’avoir une vision globale du contenu et de la qualité des données.

***

## 3. Profil démographique des patients

### 3.1 Distribution de l’âge

```python
plt.figure(figsize=(8,5))
sns.histplot(df["Age"], bins=20, kde=True)
plt.title("Distribution de l'âge des patients")
plt.xlabel("Âge")
plt.ylabel("Effectif")
plt.show()
```

Interprétation:  
- L’histogramme montre la répartition des patients selon l’âge.  
- La courbe de densité met en évidence les tranches d’âge les plus fréquentes et la forme globale de la distribution.

### 3.2 Répartition par genre

```python
plt.figure(figsize=(6,4))
sns.countplot(x="Gender", data=df)
plt.title("Répartition des patients par genre")
plt.xlabel("Genre")
plt.ylabel("Nombre de patients")
plt.show()
```

Interprétation:  
- Ce graphique en barres indique le nombre de patients de chaque genre (Male, Female).  
- Il permet de vérifier si l’échantillon est équilibré ou s’il existe un déséquilibre entre hommes et femmes.

***

## 4. Conditions médicales

### 4.1 Fréquence des principales conditions

```python
print(df["Medical Condition"].value_counts().head(10))
```

```python
top_conditions = df["Medical Condition"].value_counts().head(5).index

plt.figure(figsize=(8,5))
sns.countplot(
    x="Medical Condition",
    data=df[df["Medical Condition"].isin(top_conditions)]
)
plt.title("Top 5 des conditions médicales")
plt.xlabel("Condition médicale")
plt.ylabel("Nombre de patients")
plt.xticks(rotation=45)
plt.show()
```

Interprétation:  
- Le tableau value_counts liste les conditions médicales les plus fréquentes.  
- Le graphique met en évidence les cinq pathologies dominantes, ce qui donne une vision claire des principaux motifs de prise en charge.

***

## 5. Types d’admission

```python
print(df["Admission Type"].value_counts())
```

```python
plt.figure(figsize=(8,5))
sns.countplot(x="Admission Type", data=df)
plt.title("Répartition par type d'admission")
plt.xlabel("Type d'admission")
plt.ylabel("Nombre de patients")
plt.xticks(rotation=45)
plt.show()
```

Interprétation:  
- La variable Admission Type distingue les admissions Emergency, Urgent et Elective.  
- Le graphique montre la fréquence de chaque type d’admission et permet de voir la part des admissions d’urgence par rapport aux admissions planifiées.

***

## 6. Analyse des coûts (Billing Amount)

### 6.1 Montant facturé par type d’admission

```python
plt.figure(figsize=(9,5))
sns.boxplot(x="Admission Type", y="Billing Amount", data=df)
plt.title("Montant facturé par type d'admission")
plt.xlabel("Type d'admission")
plt.ylabel("Montant facturé")
plt.xticks(rotation=45)
plt.show()
```

Interprétation:  
- Chaque boîte résume la distribution des montants facturés pour un type d’admission (médiane, quartiles, valeurs extrêmes).  
- On peut observer si les admissions d’urgence sont en moyenne plus coûteuses que les admissions urgentes ou électives.

### 6.2 Montant facturé par condition médicale (Top 5)

```python
cond_subset = df[df["Medical Condition"].isin(top_conditions)]

plt.figure(figsize=(10,6))
sns.boxplot(x="Medical Condition", y="Billing Amount", data=cond_subset)
plt.title("Montant facturé par condition médicale (Top 5)")
plt.xlabel("Condition médicale")
plt.ylabel("Montant facturé")
plt.xticks(rotation=45)
plt.show()
```

Interprétation:  
- Ce graphique compare les distributions des montants facturés pour les principales pathologies.  
- Il met en évidence les maladies associées à des coûts plus élevés ou à une forte variabilité des montants.

### 6.3 Montant facturé par assureur

```python
print(df["Insurance Provider"].value_counts().head(10))

top_ins = df["Insurance Provider"].value_counts().head(5).index
ins_subset = df[df["Insurance Provider"].isin(top_ins)]

plt.figure(figsize=(10,6))
sns.boxplot(x="Insurance Provider", y="Billing Amount", data=ins_subset)
plt.title("Montant facturé par assureur (Top 5)")
plt.xlabel("Assureur")
plt.ylabel("Montant facturé")
plt.xticks(rotation=45)
plt.show()
```

Interprétation:  
- Le tableau montre les principaux organismes d’assurance.  
- Le boxplot permet de comparer les niveaux de coûts moyens et la dispersion des montants facturés selon les assureurs.

***

## 7. Analyse temporelle des coûts

```python
df["Date of Admission"] = pd.to_datetime(df["Date of Admission"], errors="coerce")
df["Year"] = df["Date of Admission"].dt.year
df["Month"] = df["Date of Admission"].dt.month

billing_by_year = df.groupby("Year")["Billing Amount"].sum().reset_index()

plt.figure(figsize=(8,5))
sns.barplot(x="Year", y="Billing Amount", data=billing_by_year)
plt.title("Montant total facturé par année")
plt.xlabel("Année")
plt.ylabel("Montant total facturé")
plt.show()
```

Interprétation:  
- La conversion de la date d’admission permet d’agréger les montants par année.  
- Le graphique montre l’évolution du montant total facturé au fil des années et permet de repérer des tendances globales.

***

## 8. Corrélations entre variables numériques

```python
num_cols = ["Age", "Billing Amount"]
if "Duration of Stay (Days)" in df.columns:
    num_cols.append("Duration of Stay (Days)")

corr = df[num_cols].corr()

plt.figure(figsize=(6,4))
sns.heatmap(corr, annot=True, cmap="Blues", fmt=".2f")
plt.title("Matrice de corrélation (variables numériques)")
plt.show()
```

Interprétation:  
- La matrice de corrélation mesure la relation linéaire entre l’âge, le montant facturé et éventuellement la durée de séjour.  
- Des corrélations fortes (positives ou négatives) indiquent que les variables évoluent ensemble, tandis qu’une corrélation proche de zéro traduit une relation faible.

***

## 9. Mini modèle de régression logistique (prédiction du résultat de test)

### 9.1 Préparation des données

```python
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import OneHotEncoder
from sklearn.compose import ColumnTransformer
from sklearn.pipeline import Pipeline
from sklearn.linear_model import LogisticRegression
from sklearn.metrics import classification_report, confusion_matrix

# On garde seulement Normal et Abnormal
df_model = df[df["Test Results"].isin(["Normal", "Abnormal"])].copy()

# Cible : 1 = Abnormal, 0 = Normal
df_model["target"] = (df_model["Test Results"] == "Abnormal").astype(int)

# Variables explicatives
features = ["Age", "Gender", "Medical Condition", "Admission Type"]

X = df_model[features]
y = df_model["target"]

X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42, stratify=y
)
```

Interprétation:  
- La variable cible target indique si le résultat de test d’un patient est normal ou anormal.  
- Les variables explicatives retenues sont l’âge, le genre, la condition médicale et le type d’admission; les données sont divisées en ensemble d’entraînement et de test.

### 9.2 Pipeline de prétraitement et apprentissage

```python
cat_cols = ["Gender", "Medical Condition", "Admission Type"]
num_cols = ["Age"]

preprocess = ColumnTransformer(
    transformers=[
        ("cat", OneHotEncoder(handle_unknown="ignore"), cat_cols),
        ("num", "passthrough", num_cols)
    ]
)

log_reg = LogisticRegression(max_iter=1000)

clf = Pipeline(steps=[
    ("preprocess", preprocess),
    ("model", log_reg)
])

clf.fit(X_train, y_train)
```

Interprétation:  
- Les variables catégorielles sont transformées en variables numériques via un encodage one-hot, tandis que l’âge est conservé tel quel.  
- Le modèle de régression logistique apprend à associer un profil de patient à une probabilité d’avoir un résultat de test anormal.

### 9.3 Évaluation du modèle

```python
y_pred = clf.predict(X_test)

print("Matrice de confusion :")
print(confusion_matrix(y_test, y_pred))

print("\nRapport de classification :")
print(classification_report(y_test, y_pred))
```

Interprétation:  
- La matrice de confusion indique le nombre de bonnes et mauvaises prédictions pour chaque classe.  
- Le rapport de classification présente la précision, le rappel et le score F1, ce qui donne une première idée de la qualité du modèle; ici, l’objectif est surtout d’illustrer une démarche de modélisation.

***

## 10. Conclusion

L’analyse exploratoire de ce jeu de données de santé a permis de mieux comprendre le profil des patients, la nature des pathologies prises en charge et la structure des coûts associés aux séjours hospitaliers.  
Les résultats mettent en évidence l’importance de certaines conditions médicales fréquentes et l’impact du type d’admission, de la pathologie et de l’assureur sur les montants facturés, ainsi que des tendances globales des coûts dans le temps.

Le mini modèle de régression logistique illustre comment ces données peuvent également être utilisées dans un cadre prédictif pour estimer la probabilité d’un résultat de test normal ou anormal à partir de caractéristiques simples du patient.  
Dans la continuité de ce travail, des analyses plus avancées (modèles plus complexes, ajout d’autres variables, validation plus poussée) pourraient être menées pour améliorer la précision des prédictions et aider à la prise de décision en gestion hospitalière.
